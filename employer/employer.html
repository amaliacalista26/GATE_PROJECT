<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GATE - Employer</title>

  <!-- Bootstrap lokal CSS (tetap dipakai) -->
  <link rel="stylesheet" href="../bootstrap-4.3.1-dist/css/bootstrap.min.css">

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@400;600&family=Poppins:wght@600;display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

  <!-- Global + page CSS -->
  <link rel="stylesheet" href="../global.css">
  <link rel="stylesheet" href="employer.css">

  <style>
    /* styling ringkas agar tampilan rapi saat testing */
    body { font-family: "Josefin Sans", system-ui, -apple-system, "Segoe UI", Roboto, Arial; background:#f6f7f8; }
    .custom-navbar { background:#fff; border-bottom:1px solid rgba(0,0,0,0.06); }
    .logo-gate { width:38px; height:38px; margin-right:8px; }
    .emp-notif-wrap { position: relative; margin-left:8px; }
    .img-preview { width:80px; height:80px; object-fit:cover; border-radius:8px; border:1px solid #e6e6e6; }
    .chat-floating-btn { position: fixed; right: 20px; bottom: 20px; background:#1673ff; color:#fff; padding:12px 14px; border-radius:999px; text-decoration:none; }
  </style>
</head>
<body>
  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg fixed-top custom-navbar shadow-sm">
    <div class="container d-flex align-items-center justify-content-between">
      <a class="navbar-brand d-flex align-items-center" href="../employer/employer.html">
        <img src="../asset/gatelogo.png" alt="GATE Logo" class="logo-gate">
        <span class="brand-text">GATE - <span class="text-role">Employer</span></span>
      </a>

      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
              aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
        <ul class="navbar-nav align-items-center">
          <li class="nav-item"><a class="nav-link active-link" href="employer.html">Home</a></li>
          <li class="nav-item"><a class="nav-link active-link" href="employer-post.html">Post</a></li>
          <li class="nav-item"><a class="nav-link active-link" href="employer-gate-pay.html">GatePay</a></li>
        </ul>
      </div>

      <!-- right icons: bungkus di elemen yang berada di container (setelah collapse) -->
      <div class="d-flex align-items-center">
        <!-- gunakan data-toggle/data-target supaya Bootstrap membuka modal tanpa JS ekstra -->
        <div class="emp-notif-wrap">
          <a href="#" class="emp-nav-icon text-dark" aria-label="Notifikasi"
             data-toggle="modal" data-target="#empNotifModal">
            <i class="bi bi-bell-fill fs-5"></i>
            <span id="empNotifBadge" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">5</span>
          </a>
        </div>

        <a href="employer-profile.html" class="nav-profile ml-3">
          <img src="../asset/employer.jpeg" alt="Profile" class="profile-icon" style="width:36px;height:36px;border-radius:50%;">
        </a>
      </div>
    </div>
  </nav>

  <main class="container mt-5 pt-5">
    <!-- Header -->
    <header class="text-center mb-4">
      <h1 class="fw-bold text-primary">Buat & Kelola Lowongan</h1>
      <p class="text-muted">Isi form di bawah untuk membuat lowongan: pilih bidang, lokasi, rentang gaji, judul, logo, dan deskripsi singkat.</p>
    </header>

    <!-- Post Lowongan Card (sama seperti milikmu) -->
    <div class="card mb-4">
      <div class="card-header bg-transparent fw-bold text-primary">Post Lowongan Baru</div>
      <div class="card-body">
        <form id="jobForm" class="row g-3">
          <div class="col-12 col-md-8">
            <label class="form-label">Judul Lowongan</label>
            <input id="jobTitle" type="text" class="form-control" placeholder="Contoh: UI/UX Designer (Remote, Contract)">
          </div>

          <div class="col-12 col-md-4">
            <label class="form-label">Foto / Logo</label>
            <div class="d-flex align-items-center">
              <img id="logoPreview" src="../asset/employer.jpeg" alt="preview" class="img-preview mr-3">
              <input id="logoInput" type="file" accept="image/*" class="form-control-file">
            </div>
            <div class="muted-sm mt-2">Maks 2MB. PNG/JPG.</div>
          </div>

          <!-- contoh ribbon singkat (dipangkas) -->
          <div class="col-12 col-md-4">
            <label class="ribbon-label">Bidang / Role</label>
            <select id="roleValue" class="form-control">
              <option>Informatics / IT</option>
              <option>Art & Design</option>
              <option>Product</option>
              <option>Marketing</option>
            </select>
          </div>

          <div class="col-12 col-md-4">
            <label class="ribbon-label">Lokasi</label>
            <select id="lokasiValue" class="form-control">
              <option>Jakarta</option>
              <option>Bandung</option>
              <option>Remote</option>
            </select>
          </div>

          <div class="col-12 col-md-4">
            <label class="ribbon-label">Rentang Gaji</label>
            <select id="gajiValue" class="form-control">
              <option>Rp5â€“10jt</option>
              <option>&lt; Rp5jt</option>
              <option>Rp10â€“20jt</option>
            </select>
          </div>

          <div class="col-12">
            <label class="form-label">Deskripsi Singkat</label>
            <textarea id="shortDesc" class="form-control" rows="3"></textarea>
          </div>

          <div class="col-12">
            <label class="form-label">Persyaratan (pisah koma)</label>
            <input id="requirements" type="text" class="form-control" placeholder="Contoh: 3+ tahun pengalaman, Figma, HTML/CSS">
          </div>

          <div class="col-12">
            <button id="postBtn" type="submit" class="btn btn-primary btn-block rounded-pill">Post Sekarang</button>
          </div>
        </form>
      </div>
    </div>

    <a href="employer-chat.html" class="chat-floating-btn" aria-label="Chat">ðŸ’¬ Chat</a>
  </main>

  <!-- MASTER MODAL: Daftar Notifikasi (Employer) -->
  <div class="modal fade" id="empNotifModal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content rounded-4 shadow">
        <div class="modal-header bg-primary text-white rounded-top-4">
          <h5 class="modal-title">Notifikasi (Employer)</h5>
          <button type="button" class="close btn-close-white" data-dismiss="modal" aria-label="Tutup">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body p-0">
          <div class="list-group list-group-flush" id="empNotifList">
            <a href="#" class="list-group-item list-group-item-action" data-target="#empNotifDetail1">Pelamar baru untuk lowongan UI Designer</a>
            <a href="#" class="list-group-item list-group-item-action" data-target="#empNotifDetail2">Proposal diterima dari Freelancer A</a>
            <a href="#" class="list-group-item list-group-item-action" data-target="#empNotifDetail3">Pembayaran berhasil diproses</a>
            <a href="#" class="list-group-item list-group-item-action" data-target="#empNotifDetail4">Perjanjian/kontrak ditandatangani</a>
            <a href="#" class="list-group-item list-group-item-action" data-target="#empNotifDetail5">Freelancer meminta konfirmasi review</a>
          </div>
        </div>
        <div class="modal-footer border-0">
          <small class="text-muted">Terakhir diperbarui â€¢ beberapa menit lalu</small>
        </div>
      </div>
    </div>
  </div>

  <!-- DETAIL MODALS (Employer) -->
  <div class="modal fade" id="empNotifDetail1" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content border-0 rounded-4 shadow">
        <div class="modal-header bg-primary text-white rounded-top-4">
          <h5 class="modal-title">Pelamar Baru â€” UI Designer</h5>
          <button type="button" class="close btn-close-white" data-dismiss="modal" aria-label="Tutup"><span>&times;</span></button>
        </div>
        <div class="modal-body px-4 py-3">
          <p>Ada <b>3 pelamar</b> baru untuk lowongan <i>UI Designer</i>. Periksa profil dan portofolio mereka, lalu pilih yang ingin diundang interview.</p>
          <ul>
            <li>Pelamar A â€” Portofolio: 12 project</li>
            <li>Pelamar B â€” Spesialis UI/UX mobile</li>
            <li>Pelamar C â€” Pengalaman NGO & yayasan</li>
          </ul>
        </div>
        <div class="modal-footer border-0">
          <a href="employer-applicants.html" class="btn btn-primary rounded-pill px-4">Lihat Pelamar</a>
          <button class="btn btn-outline-primary rounded-pill px-4 back-to-emp-list">Kembali</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="empNotifDetail2" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content border-0 rounded-4 shadow">
        <div class="modal-header bg-primary text-white rounded-top-4">
          <h5 class="modal-title">Proposal Diterima</h5>
          <button type="button" class="close btn-close-white" data-dismiss="modal" aria-label="Tutup"><span>&times;</span></button>
        </div>
        <div class="modal-body px-4 py-3">
          <p>Freelancer <b>A</b> mengirim proposal dan penawaran harga. Ringkasan:</p>
          <p><b>Harga:</b> Rp 1.200.000 â€¢ <b>Estimasi:</b> 10 hari kerja â€¢ <b>Term:</b> 2 revisi</p>
          <p>Silakan tinjau dan terima atau tanggapi proposal.</p>
        </div>
        <div class="modal-footer border-0">
          <button class="btn btn-primary rounded-pill px-4">Terima Proposal</button>
          <button class="btn btn-outline-primary rounded-pill px-4 back-to-emp-list">Kembali</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="empNotifDetail3" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content border-0 rounded-4 shadow">
        <div class="modal-header bg-primary text-white rounded-top-4">
          <h5 class="modal-title">Pembayaran Berhasil</h5>
          <button type="button" class="close btn-close-white" data-dismiss="modal" aria-label="Tutup"><span>&times;</span></button>
        </div>
        <div class="modal-body px-4 py-3">
          <p>Pembayaran untuk proyek <b>UI/UX Dashboard</b> sejumlah <b>Rp 2.500.000</b> telah berhasil diproses. Bukti transaksi tersedia di GatePay.</p>
        </div>
        <div class="modal-footer border-0">
          <a href="employer-gate-pay.html" class="btn btn-primary rounded-pill px-4">Lihat Bukti</a>
          <button class="btn btn-outline-primary rounded-pill px-4 back-to-emp-list">Kembali</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="empNotifDetail4" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content border-0 rounded-4 shadow">
        <div class="modal-header bg-primary text-white rounded-top-4">
          <h5 class="modal-title">Kontrak Ditandatangani</h5>
          <button type="button" class="close btn-close-white" data-dismiss="modal" aria-label="Tutup"><span>&times;</span></button>
        </div>
        <div class="modal-body px-4 py-3">
          <p>Freelancer dan pihak perusahaan telah menandatangani kontrak digital. Periksa detail dan milestone di halaman proyek.</p>
        </div>
        <div class="modal-footer border-0">
          <a href="employer-project-detail.html" class="btn btn-primary rounded-pill px-4">Buka Proyek</a>
          <button class="btn btn-outline-primary rounded-pill px-4 back-to-emp-list">Kembali</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="empNotifDetail5" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content border-0 rounded-4 shadow">
        <div class="modal-header bg-primary text-white rounded-top-4">
          <h5 class="modal-title">Permintaan Review</h5>
          <button type="button" class="close btn-close-white" data-dismiss="modal" aria-label="Tutup"><span>&times;</span></button>
        </div>
        <div class="modal-body px-4 py-3">
          <p>Freelancer meminta Anda memberikan <b>review</b> untuk proyek <i>Landing Page Campaign</i>. Berikan rating dan komentar singkat untuk membantu reputasi freelancer.</p>
        </div>
        <div class="modal-footer border-0">
          <a href="employer-reviews.html" class="btn btn-primary rounded-pill px-4">Tulis Review</a>
          <button class="btn btn-outline-primary rounded-pill px-4 back-to-emp-list">Kembali</button>
        </div>
      </div>
    </div>
  </div>

  <footer class="text-center py-3 text-muted small" style="background-color:#f8f9fa;">&copy; 2025 GATE. All Rights Reserved.</footer>

  <!-- SCRIPTS: pastikan urutan ini (jQuery non-slim, Popper, Bootstrap) -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="../bootstrap-4.3.1-dist/js/popper.min.js"></script>
  <script src="../bootstrap-4.3.1-dist/js/bootstrap.min.js"></script>

  <!-- optional global scripts (pastikan tidak me-reset handler) -->
  <script src="../scripts.js"></script>

  <script>
    // chaining modal detail: dijalankan setelah jQuery & Bootstrap dimuat
    (function($){
      $(function(){
        // klik item di master modal -> buka detail setelah master tertutup
        $('#empNotifModal').on('click', '.list-group-item', function(e){
          e.preventDefault();
          var target = $(this).data('target');
          if(!target) return $('#empNotifModal').modal('hide');
          $('#empNotifModal').modal('hide');
          $('#empNotifModal').one('hidden.bs.modal', function(){
            $(target).modal('show');
          });
        });

        // tombol kembali di detail -> tutup detail & buka master lagi
        $('.back-to-emp-list').on('click', function(e){
          e.preventDefault();
          $('.modal').modal('hide');
          $('.modal').one('hidden.bs.modal', function(){
            $('#empNotifModal').modal('show');
          });
        });

        // update badge count
        var count = $('#empNotifList .list-group-item').length;
        $('#empNotifBadge').text(count > 0 ? count : '');
      });
    })(jQuery);
  </script>
</body>
</html>
