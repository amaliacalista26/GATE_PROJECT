<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GATE - Employer</title>

  <!-- Bootstrap lokal 4.3.1 -->
  <link rel="stylesheet" href="../bootstrap-4.3.1-dist/css/bootstrap.min.css">

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@400;600&family=Poppins:wght@600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

  <!-- Global + page CSS -->
  <link rel="stylesheet" href="../global.css">
  <link rel="stylesheet" href="employer.css">

  <style>
    /* ===== styling untuk ribbon dropdowns & form (rapi) ===== */
    .ribbon-dropdown .ribbon-toggle {
      border-radius: 10px;
      padding: 10px 12px;
      font-weight: 600;
    }
    .ribbon-dropdown .card {
      border-radius: 8px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.06);
    }
    .ribbon-dropdown .option-btn {
      min-width: 92px;
      border-radius: 8px;
      margin: 4px 8px 4px 0;
      white-space: nowrap;
    }
    .ribbon-label {
      font-size: .95rem;
      color: #6c757d;
      display:block;
      margin-bottom:6px;
    }
    .rotate { transform: rotate(180deg); transition: transform .25s ease; }
    .img-preview {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 8px;
      border: 1px solid #e6e6e6;
    }
    .muted-sm { font-size: .9rem; color: #6c757d; }
    @media (max-width: 575.98px) {
      .ribbon-dropdown .option-btn { min-width: 72px; }
    }
  </style>
</head>
<body>
  <!-- NAVBAR -->
  <nav class="navbar navbar-expand-lg fixed-top custom-navbar shadow-sm">
    <div class="container d-flex align-items-center justify-content-between">
      <a class="navbar-brand d-flex align-items-center" href="../employer/employer.html">
        <img src="../asset/gatelogo.png" alt="GATE Logo" class="logo-gate">
        <span class="brand-text">GATE - <span class="text-role">Employer</span></span>
      </a>

      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
              aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
        <ul class="navbar-nav align-items-center">
          <li class="nav-item"><a class="nav-link active-link" href="employer.html">Home</a></li>
          <li class="nav-item"><a class="nav-link active-link" href="freelancer-jobs.html">Post</a></li>
          <li class="nav-item"><a class="nav-link" href="employer-gate-pay.html">GatePay</a></li>
        </ul>
      </div>

      <div class="d-flex align-items-center gap-3">
        <div class="position-relative">
          <a href="employer-notifikasi.html" class="nav-icon text-dark">
            <i class="bi bi-bell-fill fs-5"></i>
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">5</span>
          </a>
        </div>
        <a href="employer-edit-profile.html" class="nav-profile">
          <img src="../asset/profile.png" alt="Profile" class="profile-icon">
        </a>
      </div>
    </div>
  </nav>

  <main class="container mt-5 pt-5">
    <!-- Header -->
    <header class="text-center mb-4">
      <h1 class="fw-bold text-primary">Buat & Kelola Lowongan</h1>
      <p class="text-muted">Isi form di bawah untuk membuat lowongan: pilih bidang, lokasi, rentang gaji, judul, logo, dan deskripsi singkat.</p>
    </header>

    <!-- Post Lowongan Card -->
    <div class="card mb-4">
      <div class="card-header bg-transparent fw-bold text-primary">Post Lowongan Baru</div>
      <div class="card-body">
        <form id="jobForm" class="row g-3">
          <!-- Judul & Foto -->
          <div class="col-12 col-md-8">
            <label class="form-label">Judul Lowongan</label>
            <input id="jobTitle" type="text" class="form-control" placeholder="Contoh: UI/UX Designer (Remote, Contract)">
          </div>

          <div class="col-12 col-md-4">
            <label class="form-label">Foto / Logo</label>
            <div class="d-flex align-items-center">
              <img id="logoPreview" src="../asset/profile.png" alt="preview" class="img-preview mr-3">
              <input id="logoInput" type="file" accept="image/*" class="form-control-file">
            </div>
            <div class="muted-sm mt-2">Maks 2MB. PNG/JPG.</div>
            <BR></BR>
          </div>

          <!-- ROLE RIBBON (rapi, tanpa "Lainnya") -->
          <div class="col-12 col-md-4">
            <label class="ribbon-label">Bidang / Role</label>
            <div class="ribbon-dropdown">
              <button id="roleToggle" class="btn btn-outline-primary btn-block text-start ribbon-toggle d-flex align-items-center justify-content-between"
                      type="button" data-toggle="collapse" data-target="#collapseRole" aria-expanded="false" aria-controls="collapseRole">
                <span id="roleSelected">Pilih Bidang — Informatics / IT</span>
                <i id="roleChevron" class="bi bi-chevron-down ml-2"></i>
              </button>

              <div class="collapse mt-2" id="collapseRole">
                <div class="card card-body p-2">
                  <div class="d-flex flex-wrap">
                    <button type="button" class="btn btn-sm btn-light option-btn" data-value="Art & Design">Art & Design</button>
                    <button type="button" class="btn btn-sm btn-light option-btn" data-value="Informatics / IT">Informatics / IT</button>
                    <button type="button" class="btn btn-sm btn-light option-btn" data-value="Product">Product</button>
                    <button type="button" class="btn btn-sm btn-light option-btn" data-value="Marketing">Marketing</button>
                    <button type="button" class="btn btn-sm btn-light option-btn" data-value="Data Science">Data Science</button>
                    <button type="button" class="btn btn-sm btn-light option-btn" data-value="DevOps">DevOps</button>
                  </div>
                </div>
              </div>
            </div>

            <input type="hidden" id="roleValue" name="roleValue" value="Informatics / IT">
          </div>

          <!-- LOKASI RIBBON (rapi, tanpa "Lainnya") -->
          <div class="col-12 col-md-4">
            <label class="ribbon-label">Lokasi</label>
            <div class="ribbon-dropdown">
              <button id="lokasiToggle" class="btn btn-outline-secondary btn-block text-start ribbon-toggle d-flex align-items-center justify-content-between"
                      type="button" data-toggle="collapse" data-target="#collapseLokasi" aria-expanded="false" aria-controls="collapseLokasi">
                <span id="lokasiSelected">Pilih Lokasi — Jakarta</span>
                <i id="lokasiChevron" class="bi bi-chevron-down ml-2"></i>
              </button>

              <div class="collapse mt-2" id="collapseLokasi">
                <div class="card card-body p-2">
                  <div class="d-flex flex-wrap">
                    <button type="button" class="btn btn-sm btn-light option-btn" data-value="Jakarta">Jakarta</button>
                    <button type="button" class="btn btn-sm btn-light option-btn" data-value="Bandung">Bandung</button>
                    <button type="button" class="btn btn-sm btn-light option-btn" data-value="Surabaya">Surabaya</button>
                    <button type="button" class="btn btn-sm btn-light option-btn" data-value="Yogyakarta">Yogyakarta</button>
                    <button type="button" class="btn btn-sm btn-light option-btn" data-value="Remote">Remote</button>
                  </div>
                </div>
              </div>
            </div>

            <input type="hidden" id="lokasiValue" name="lokasiValue" value="Jakarta">
          </div>

          <!-- GAJI RIBBON (rapi, tanpa "Lainnya") -->
          <div class="col-12 col-md-4">
            <label class="ribbon-label">Rentang Gaji</label>
            <div class="ribbon-dropdown">
              <button id="gajiToggle" class="btn btn-outline-success btn-block text-start ribbon-toggle d-flex align-items-center justify-content-between"
                      type="button" data-toggle="collapse" data-target="#collapseGaji" aria-expanded="false" aria-controls="collapseGaji">
                <span id="gajiSelected">Pilih Gaji — Rp5–10jt</span>
                <i id="gajiChevron" class="bi bi-chevron-down ml-2"></i>
              </button>

              <div class="collapse mt-2" id="collapseGaji">
                <div class="card card-body p-2">
                  <div class="d-flex flex-wrap">
                    <button type="button" class="btn btn-sm btn-light option-btn" data-value="<5jt">&lt; Rp5jt</button>
                    <button type="button" class="btn btn-sm btn-light option-btn" data-value="5-10jt">Rp5–10jt</button>
                    <button type="button" class="btn btn-sm btn-light option-btn" data-value="10-20jt">Rp10–20jt</button>
                    <button type="button" class="btn btn-sm btn-light option-btn" data-value=">20jt">&gt; Rp20jt</button>
                    <button type="button" class="btn btn-sm btn-light option-btn" data-value="Negosiasi">Negosiasi</button>
                  </div>
                </div>
              </div>
            </div>

            <input type="hidden" id="gajiValue" name="gajiValue" value="5-10jt">
          </div>

          <!-- Deskripsi singkat -->
          <div class="col-12">
            <br>
            <label class="form-label">Deskripsi Singkat</label>
            <textarea id="shortDesc" class="form-control" rows="3" placeholder="Ringkasan tugas utama, durasi (jika contract), dan benefit singkat."></textarea>
          </div>

          <!-- Persyaratan singkat -->
          <div class="col-12">
            <br>
            <label class="form-label">Persyaratan (pisah koma)</label>
            <input id="requirements" type="text" class="form-control" placeholder="Contoh: 3+ tahun pengalaman, Figma, HTML/CSS">
            <div class="muted-sm mt-1">Masukkan beberapa kata kunci/requirements yang muncul pada tampilan lowongan.</div>
          </div>

          <!-- Submit -->
          <div class="col-12">
            <br>
            <button id="postBtn" type="submit" class="btn btn-primary btn-block rounded-pill">Post Sekarang</button>
          </div>
        </form>
      </div>
    </div>
  </main>

  <footer class="text-center py-3 text-muted small" style="background-color: #f8f9fa;">
    &copy; 2025 GATE. All Rights Reserved.
  </footer>

  <!-- SCRIPTS: local jQuery + Popper + Bootstrap 4.3.1 -->
  <script src="../jquery.min.js"></script>
  <script src="../bootstrap-4.3.1-dist/js/popper.min.js"></script>
  <script src="../bootstrap-4.3.1-dist/js/bootstrap.min.js"></script>

  <!-- your global scripts -->
  <script src="../scripts.js"></script>

  <!-- Inline JS: handle ribbon interactions, preview, submit (uses jQuery & BS4) -->
  <script>
    (function ($) {
      $(document).ready(function () {
        // ROLE
        var $collapseRole = $('#collapseRole');
        var $roleSelected = $('#roleSelected');
        var $roleValue = $('#roleValue');
        var $roleChevron = $('#roleChevron');

        $collapseRole.on('show.bs.collapse', function () { $roleChevron.addClass('rotate'); });
        $collapseRole.on('hide.bs.collapse', function () { $roleChevron.removeClass('rotate'); });

        $('#collapseRole .option-btn').on('click', function () {
          var v = $(this).data('value');
          $roleSelected.text('Pilih Bidang — ' + v);
          $roleValue.val(v);
          $collapseRole.collapse('hide');
        });

        // LOKASI
        var $collapseLokasi = $('#collapseLokasi');
        var $lokasiSelected = $('#lokasiSelected');
        var $lokasiValue = $('#lokasiValue');
        var $lokasiChevron = $('#lokasiChevron');

        $collapseLokasi.on('show.bs.collapse', function () { $lokasiChevron.addClass('rotate'); });
        $collapseLokasi.on('hide.bs.collapse', function () { $lokasiChevron.removeClass('rotate'); });

        $('#collapseLokasi .option-btn').on('click', function () {
          var v = $(this).data('value');
          $lokasiSelected.text('Pilih Lokasi — ' + v);
          $lokasiValue.val(v);
          $collapseLokasi.collapse('hide');
        });

        // GAJI
        var $collapseGaji = $('#collapseGaji');
        var $gajiSelected = $('#gajiSelected');
        var $gajiValue = $('#gajiValue');
        var $gajiChevron = $('#gajiChevron');

        $collapseGaji.on('show.bs.collapse', function () { $gajiChevron.addClass('rotate'); });
        $collapseGaji.on('hide.bs.collapse', function () { $gajiChevron.removeClass('rotate'); });

        $('#collapseGaji .option-btn').on('click', function () {
          var v = $(this).data('value');
          var label = $(this).text().trim();
          $gajiSelected.text('Pilih Gaji — ' + label);
          $gajiValue.val(v);
          $collapseGaji.collapse('hide');
        });

        // Image preview (logo)
        $('#logoInput').on('change', function (e) {
          var file = e.target.files[0];
          if (!file) return;
          if (!file.type.startsWith('image/')) { alert('Pilih file gambar.'); $('#logoInput').val(''); return; }
          var reader = new FileReader();
          reader.onload = function (ev) { $('#logoPreview').attr('src', ev.target.result); }
          reader.readAsDataURL(file);
        });

        // Close any open collapse when clicking outside
        $(document).on('click', function (e) {
          var $roots = $('.ribbon-dropdown');
          var inside = false;
          $roots.each(function () { if ($(this).has(e.target).length || $(this)[0] === e.target) inside = true; });
          if (!inside) {
            $collapseRole.collapse('hide');
            $collapseLokasi.collapse('hide');
            $collapseGaji.collapse('hide');
          }
        });

        // Submit (demo)
        $('#jobForm').on('submit', function (e) {
          e.preventDefault();
          var payload = {
            title: $('#jobTitle').val().trim(),
            role: $roleValue.val(),
            lokasi: $lokasiValue.val(),
            gaji: $gajiValue.val(),
            description: $('#shortDesc').val().trim(),
            requirements: $('#requirements').val().trim(),
            logo: $('#logoInput')[0].files[0] ? $('#logoInput')[0].files[0].name : null,
            createdAt: new Date().toISOString()
          };

          if (!payload.title) { alert('Mohon isi judul lowongan.'); $('#jobTitle').focus(); return; }
          if (!payload.description) { alert('Mohon isi deskripsi singkat.'); $('#shortDesc').focus(); return; }

          console.log('Payload lowongan:', payload);
          alert('Lowongan berhasil dibuat (lihat console untuk payload demo).');
          // TODO: kirim payload via AJAX / FormData ke backend
        });

      });
    })(jQuery);
  </script>
</body>
</html>
